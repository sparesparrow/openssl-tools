# Artifact Lifecycle Configuration
# Manages artifact lifecycle and cache invalidation

lifecycle:
  stages:
    - development
    - testing
    - staging
    - production
  
  retention_policies:
    development:
      days: 7
      versions: 3
    testing:
      days: 14
      versions: 5
    staging:
      days: 30
      versions: 10
    production:
      days: 365
      versions: 20
  
  cache_invalidation:
    source_changes:
      - conanfile.py
      - VERSION.dat
      - configure
      - config
      - CMakeLists.txt
      - Makefile
    binary_changes:
      - settings.os
      - settings.arch
      - settings.compiler
      - settings.compiler.version
      - settings.build_type
      - options.fips
      - options.shared
      - options.no_asm
    dependency_changes:
      - requirements.txt
      - conanfile.txt
      - conan-dev/profiles/*.profile

artifacts:
  package_types:
    - source
    - binary
    - test
    - documentation
  
  storage_backends:
    - local
    - remote
    - archive
  
  checksum_algorithms:
    - sha256
    - sha512

monitoring:
  enabled: true
  metrics:
    - cache_hit_rate
    - artifact_size
    - retention_compliance
    - invalidation_frequency
  
  alerts:
    - low_cache_hit_rate
    - oversized_artifacts
    - retention_violations
    - frequent_invalidations

cleanup:
  automatic: true
  schedule: "0 2 * * *"  # Daily at 2 AM
  dry_run: false
  
  policies:
    - remove_expired_artifacts
    - compress_old_artifacts
    - archive_important_artifacts
    - clean_orphaned_files
