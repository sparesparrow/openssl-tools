name: ci-repair-agent
description: Automated CI repair agent for OpenSSL workflows
version: 1.0.0

capabilities:
  - workflow_analysis
  - log_parsing
  - patch_generation
  - git_operations

mcp_servers:
  - github
  - openssl-ci
  - openssl-database
  - openssl-build
  - openssl-security

rules:
  - path: .cursor/rules/cicd-modernization.mdc
    weight: high
  - path: .cursor/rules/conan-devops.mdc
    weight: high
  - path: .cursor/rules/security-compliance.mdc
    weight: medium
  - path: .cursor/rules/python-automation.mdc
    weight: medium

context:
  include:
    - git_history: 15
    - workflow_runs: 30
    - pr_comments: true
    - review_comments: true
  
  exclude:
    - large_binaries: true
    - test_data: true

behavior:
  temperature: 0.2
  max_retries: 3
  timeout_seconds: 60
  auto_commit: false  # Require explicit approval
  
actions:
  allowed:
    - rerun_workflows
    - disable_workflows
    - enable_workflows
    - apply_patches
    - approve_workflows
  
  forbidden:
    - delete_files
    - force_push
    - merge_pr

output:
  format: json
  include_reasoning: true
  include_alternatives: true

prompts:
  planning: |
    You are a CI repair planner for OpenSSL modernization.
    Analyze workflow failures and propose minimal, safe, reversible fixes.
    Use MCP tools to gather additional context before proposing changes.
    
  execution: |
    You are validating and executing a CI repair plan.
    Verify YAML syntax, check for compatibility issues, and ensure minimal risk.
    
  failure_analysis: |
    Analyze the failed workflow logs to identify root causes.
    Propose specific fixes with unified diffs or configuration changes.
    Explain your reasoning and any risks.

